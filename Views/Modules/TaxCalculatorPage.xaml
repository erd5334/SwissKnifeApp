<Page x:Class="SwissKnifeApp.Views.Modules.TaxCalculatorPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
      Title="Vergi HesaplayÄ±cÄ±"
      Background="{DynamicResource MahApps.Brushes.ThemeBackground}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="ðŸ’° Vergi HesaplayÄ±cÄ±" 
                      FontSize="28" 
                      FontWeight="Bold"
                      Foreground="{DynamicResource MahApps.Brushes.Accent}"/>
            <TextBlock Text="Gelir, KDV, Kurumlar ve Kira Vergisi HesaplamalarÄ±" 
                      FontSize="14" 
                      Foreground="{DynamicResource MahApps.Brushes.Gray1}"
                      Margin="0,5,0,0"/>
            
            <!-- GÃ¼ncelleme Bilgisi -->
            <Grid Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="ðŸ“… Son GÃ¼ncelleme: " 
                              FontSize="12" 
                              Foreground="{DynamicResource MahApps.Brushes.Gray2}"/>
                    <TextBlock x:Name="TxtLastUpdate" 
                              Text="YÃ¼kleniyor..." 
                              FontSize="12" 
                              FontWeight="SemiBold"
                              Foreground="{DynamicResource MahApps.Brushes.Accent}"/>
                </StackPanel>
                
                <Button x:Name="BtnRefreshRates" 
                       Grid.Column="1" 
                       Content="ðŸ”„ OranlarÄ± GÃ¼ncelle" 
                       Click="BtnRefreshRates_Click"
                       Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                       Height="30"
                       Padding="15,0"/>
            </Grid>

            <!-- Disclaimer -->
            <Border Background="#FFF3CD" 
                   BorderBrush="#FFC107" 
                   BorderThickness="1" 
                   CornerRadius="5" 
                   Padding="10" 
                   Margin="0,10,0,0">
                <TextBlock TextWrapping="Wrap" 
                          FontSize="11" 
                          Foreground="#856404">
                    <Run Text="âš ï¸ UyarÄ±:"/> 
                    Bu hesaplamalar bilgilendirme amaÃ§lÄ±dÄ±r. Resmi iÅŸlemler iÃ§in yetkili muhasebeciye danÄ±ÅŸÄ±nÄ±z.
                </TextBlock>
            </Border>
        </StackPanel>

        <!-- Tabs -->
        <TabControl Grid.Row="1" 
                   Style="{StaticResource MahApps.Styles.TabControl}"
                   mah:HeaderedControlHelper.HeaderFontSize="14">
            
            <!-- Gelir Vergisi -->
            <TabItem Header="ðŸ“Š Gelir Vergisi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbIncomeYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 SelectionChanged="CmbIncomeYear_SelectionChanged"
                                 Margin="0,0,0,15"/>
                        
                        <ComboBox x:Name="CmbIncomeType" 
                                 mah:TextBoxHelper.Watermark="Gelir TÃ¼rÃ¼"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="Ãœcret Geliri" Tag="ucret" IsSelected="True"/>
                            <ComboBoxItem Content="Ãœcret DÄ±ÅŸÄ± Gelir" Tag="ucretdisi"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumIncomeMatrah"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Vergi MatrahÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ’° Hesapla" 
                               Click="BtnCalculateIncomeTax_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="IncomeTaxResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <StackPanel>
                                <TextBlock Text="Hesaplama Sonucu" 
                                          FontSize="18" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,15"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Vergi MatrahÄ±:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtIncomeMatrahResult" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Gelir Vergisi:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtIncomeTaxResult" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Net Tutar:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                    <TextBlock x:Name="TxtIncomeNetResult" Grid.Row="2" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                                </Grid>

                                <Separator Margin="0,15"/>

                                <TextBlock Text="Vergi Dilimleri:" FontSize="14" FontWeight="Bold" Margin="0,10,0,10"/>
                                <ItemsControl x:Name="IncomeTaxBrackets">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource MahApps.Brushes.Gray10}" 
                                                   Padding="10" 
                                                   Margin="0,5" 
                                                   CornerRadius="5">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="{Binding Aciklama}" FontSize="12" FontWeight="SemiBold"/>
                                                        <TextBlock FontSize="11" Foreground="{DynamicResource MahApps.Brushes.Gray2}">
                                                            <Run Text="Matrah:"/>
                                                            <Run Text="{Binding Matrah, StringFormat='{}{0:N2} TL'}"/>
                                                        </TextBlock>
                                                    </StackPanel>
                                                    <TextBlock Grid.Column="1" 
                                                              Text="{Binding VergiTutari, StringFormat='{}{0:N2} TL'}" 
                                                              FontSize="13" 
                                                              FontWeight="Bold"
                                                              Foreground="{DynamicResource MahApps.Brushes.Accent}"
                                                              VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- KDV -->
            <TabItem Header="ðŸ§¾ KDV">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbKdvOperation" 
                                 SelectionChanged="CmbKdvOperation_SelectionChanged"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="KDV Dahil Hesaplama" Tag="dahil" IsSelected="True"/>
                            <ComboBoxItem Content="KDV HariÃ§ Hesaplama" Tag="haric"/>
                        </ComboBox>

                        <ComboBox x:Name="CmbKdvRate" 
                                 mah:TextBoxHelper.Watermark="KDV OranÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="%1" Tag="1"/>
                            <ComboBoxItem Content="%8" Tag="8"/>
                            <ComboBoxItem Content="%10" Tag="10"/>
                            <ComboBoxItem Content="%18" Tag="18"/>
                            <ComboBoxItem Content="%20" Tag="20" IsSelected="True"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumKdvAmount"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="100"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Tutar (TL)"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ§¾ Hesapla" 
                               Click="BtnCalculateKdv_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="KdvResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Net Tutar:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtKdvNetAmount" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="KDV TutarÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtKdvAmount" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Toplam:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtKdvTotal" Grid.Row="2" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Kurumlar Vergisi -->
            <TabItem Header="ðŸ¢ Kurumlar Vergisi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbCorporateYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 SelectionChanged="CmbCorporateYear_SelectionChanged"
                                 Margin="0,0,0,15"/>

                        <CheckBox x:Name="ChkFinancial" 
                                 Content="Finans Kurumu (Banka, Sigorta, vb.)"
                                 Margin="0,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumCorporateMatrah"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="10000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Safi Kurum KazancÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ¢ Hesapla" 
                               Click="BtnCalculateCorporateTax_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="CorporateTaxResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Safi Kurum KazancÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtCorporateMatrah" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Vergi OranÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtCorporateRate" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="{DynamicResource MahApps.Brushes.Accent}" Margin="0,5"/>

                                <Separator Grid.Row="2" Grid.ColumnSpan="2" Margin="0,10"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Kurumlar Vergisi:" FontSize="16" FontWeight="Bold" Margin="0,5"/>
                                <TextBlock x:Name="TxtCorporateTax" Grid.Row="3" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Kira Vergisi -->
            <TabItem Header="ðŸ  Kira Vergisi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbRentYear" 
                                 mah:TextBoxHelper.Watermark="Gelir YÄ±lÄ±"
                                 SelectionChanged="CmbRentYear_SelectionChanged"
                                 Margin="0,0,0,15"/>

                        <CheckBox x:Name="ChkRentExemption" 
                                 Content="Konut Kira Geliri Ä°stisnasÄ±"
                                 IsChecked="True"
                                 Margin="0,0,0,5"/>
                        
                        <TextBlock x:Name="TxtRentExemptionAmount" 
                                  Text="(2025: 47.000 TL)" 
                                  FontSize="11" 
                                  Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                  Margin="25,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumRentIncome"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="YÄ±llÄ±k Kira Geliri (TL)"
                                          Margin="0,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumOtherIncome"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          Value="0"
                                          mah:TextBoxHelper.Watermark="DiÄŸer Gelirler (TL) - Opsiyonel"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ  Hesapla" 
                               Click="BtnCalculateRentTax_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="RentTaxResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <StackPanel>
                                <TextBlock Text="Hesaplama Sonucu" 
                                          FontSize="18" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,15"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Kira Geliri:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtRentIncomeResult" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Vergilendirilebilir Matrah:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtRentTaxableAmount" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Gelir Vergisi:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtRentTax" Grid.Row="2" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Net Kira Geliri:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                    <TextBlock x:Name="TxtRentNet" Grid.Row="3" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Damga Vergisi -->
            <TabItem Header="ðŸ“„ Damga Vergisi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <mah:NumericUpDown x:Name="NumStampAmount"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Ä°ÅŸlem TutarÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ“„ Hesapla" 
                               Click="BtnCalculateStampTax_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="StampResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Ä°ÅŸlem TutarÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtStampBase" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Damga Vergisi (â€°0.948):" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtStampTax" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Toplam Ã–deme:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtStampTotal" Grid.Row="2" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- MTV -->
            <TabItem Header="ðŸš— MTV">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbMtvYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                        </ComboBox>

                        <ComboBox x:Name="CmbVehicleType" 
                                 mah:TextBoxHelper.Watermark="AraÃ§ TÃ¼rÃ¼"
                                 SelectionChanged="CmbVehicleType_SelectionChanged"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="Otomobil" Tag="car" IsSelected="True"/>
                            <ComboBoxItem Content="Motosiklet" Tag="motorcycle"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumEngineSize"
                                          Minimum="0"
                                          Maximum="10000"
                                          Interval="10"
                                          mah:TextBoxHelper.Watermark="Motor Hacmi (cc)"
                                          Margin="0,0,0,15"/>

                        <StackPanel x:Name="PnlCarAge" Margin="0,0,0,15">
                            <ComboBox x:Name="CmbCarAge" 
                                     mah:TextBoxHelper.Watermark="AraÃ§ YaÅŸÄ±"
                                     Margin="0,0,0,0">
                                <ComboBoxItem Content="1 yaÅŸÄ±nda" Tag="1" IsSelected="True"/>
                                <ComboBoxItem Content="2 yaÅŸÄ±nda" Tag="2"/>
                                <ComboBoxItem Content="3 yaÅŸÄ±nda" Tag="3"/>
                                <ComboBoxItem Content="4 yaÅŸÄ±nda" Tag="4"/>
                                <ComboBoxItem Content="5+ yaÅŸÄ±nda" Tag="5"/>
                            </ComboBox>
                        </StackPanel>

                        <Button Content="ðŸš— Hesapla" 
                               Click="BtnCalculateMtv_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="MtvResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="MTV TutarÄ±:" FontSize="16" FontWeight="Bold" Margin="0,5"/>
                                <TextBlock x:Name="TxtMtvAmount" Grid.Row="0" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- KDV TevkifatÄ± -->
            <TabItem Header="âœ‚ï¸ KDV TevkifatÄ±">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbWithholdingCategory" 
                                 mah:TextBoxHelper.Watermark="Hizmet Kategorisi"
                                 Margin="0,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumWithholdingAmount"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Hizmet Bedeli (KDV HariÃ§)"
                                          Margin="0,0,0,15"/>

                        <Button Content="âœ‚ï¸ Hesapla" 
                               Click="BtnCalculateWithholding_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="WithholdingResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Hizmet Bedeli:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtWithholdingBase" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="KDV TutarÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtWithholdingVat" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Tevkifat TutarÄ±:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtWithholdingAmount" Grid.Row="2" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#FFC107" Margin="0,5"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Ã–denecek KDV:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtWithholdingNet" Grid.Row="3" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- DeÄŸer ArtÄ±ÅŸ KazancÄ± -->
            <TabItem Header="ðŸ“ˆ DeÄŸer ArtÄ±ÅŸ KazancÄ±">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbCapitalGainYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                        </ComboBox>

                        <ComboBox x:Name="CmbAssetType" 
                                 mah:TextBoxHelper.Watermark="VarlÄ±k TÃ¼rÃ¼"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="Gayrimenkul" Tag="gayrimenkul" IsSelected="True"/>
                            <ComboBoxItem Content="Menkul KÄ±ymet" Tag="menkul"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumPurchasePrice"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="10000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="AlÄ±ÅŸ FiyatÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumSalePrice"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="10000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="SatÄ±ÅŸ FiyatÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <Button Content="ðŸ“ˆ Hesapla" 
                               Click="BtnCalculateCapitalGain_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="CapitalGainResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <StackPanel>
                                <TextBlock Text="Hesaplama Sonucu" 
                                          FontSize="18" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,15"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="KazanÃ§:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtCapitalGain" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Ä°stisna (%50):" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtCapitalExemption" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Vergi TutarÄ±:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtCapitalTax" Grid.Row="2" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="Net KazanÃ§:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                    <TextBlock x:Name="TxtCapitalNet" Grid.Row="3" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- DeÄŸerli Konut Vergisi -->
            <TabItem Header="ðŸ° DeÄŸerli Konut">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbLuxuryYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumHouseValue"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="100000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Konut DeÄŸeri (TL)"
                                          Margin="0,0,0,15"/>

                        <TextBlock Text="ðŸ’¡ 2025 yÄ±lÄ± iÃ§in eÅŸik deÄŸer: 12.500.000 TL" 
                                  FontSize="11" 
                                  Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,15"/>

                        <Button Content="ðŸ° Hesapla" 
                               Click="BtnCalculateLuxuryHousing_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="LuxuryResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <StackPanel>
                                <TextBlock Text="Hesaplama Sonucu" 
                                          FontSize="18" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,15"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Konut DeÄŸeri:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtLuxuryValue" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="DeÄŸerli Konut Vergisi:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                    <TextBlock x:Name="TxtLuxuryTax" Grid.Row="1" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#DC3545" Margin="0,10,0,5"/>
                                </Grid>

                                <ItemsControl x:Name="LuxuryBrackets" Margin="0,15,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource MahApps.Brushes.Gray10}" 
                                                   Padding="10" 
                                                   Margin="0,5" 
                                                   CornerRadius="5">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Text="{Binding Aciklama}" FontSize="12"/>
                                                    <TextBlock Grid.Column="1" FontSize="12" FontWeight="Bold">
                                                        <Run Text="{Binding VergiTutari, StringFormat='{}{0:N2} TL'}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Emlak Vergisi -->
            <TabItem Header="ðŸ˜ï¸ Emlak Vergisi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbPropertyYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                        </ComboBox>

                        <ComboBox x:Name="CmbPropertyType" 
                                 mah:TextBoxHelper.Watermark="Emlak TÃ¼rÃ¼"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="Bina" Tag="bina" IsSelected="True"/>
                            <ComboBoxItem Content="Arazi" Tag="arazi"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumPropertyValue"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="10000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Emlak DeÄŸeri (TL)"
                                          Margin="0,0,0,15"/>

                        <TextBlock Text="ðŸ’¡ Bina: %0.2, Arazi: %0.1" 
                                  FontSize="11" 
                                  Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                  Margin="0,0,0,15"/>

                        <Button Content="ðŸ˜ï¸ Hesapla" 
                               Click="BtnCalculateProperty_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="PropertyResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Emlak DeÄŸeri:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtPropertyValue" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Emlak Vergisi:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtPropertyTax" Grid.Row="1" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#DC3545" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Ã–TV (AkaryakÄ±t) -->
            <TabItem Header="â›½ Ã–TV">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbFuelType" 
                                 mah:TextBoxHelper.Watermark="YakÄ±t TÃ¼rÃ¼"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="Benzin" Tag="Benzin" IsSelected="True"/>
                            <ComboBoxItem Content="Motorin" Tag="Motorin"/>
                            <ComboBoxItem Content="LPG" Tag="LPG"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumFuelLiters"
                                          Minimum="0"
                                          Maximum="10000"
                                          Interval="1"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Litre"
                                          Margin="0,0,0,15"/>

                        <TextBlock FontSize="11" 
                                  Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,15">
                            <Run Text="ðŸ’¡ 2025 Ã–TV OranlarÄ±:"/>
                            <LineBreak/>
                            <Run Text="Benzin: 5.17 TL/litre"/>
                            <LineBreak/>
                            <Run Text="Motorin: 3.44 TL/litre"/>
                            <LineBreak/>
                            <Run Text="LPG: 2.07 TL/litre"/>
                        </TextBlock>

                        <Button Content="â›½ Hesapla" 
                               Click="BtnCalculateSct_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="SctResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Litre:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtSctLiters" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Ã–TV TutarÄ±:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtSctAmount" Grid.Row="1" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#DC3545" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Veraset ve Ä°ntikal -->
            <TabItem Header="ðŸŽ Veraset ve Ä°ntikal">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbInheritanceYear" 
                                 mah:TextBoxHelper.Watermark="Vergi YÄ±lÄ±"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                        </ComboBox>

                        <ComboBox x:Name="CmbHeirType" 
                                 mah:TextBoxHelper.Watermark="MirasÃ§Ä± TÃ¼rÃ¼"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="EÅŸ ve Ã‡ocuklar" Tag="escocuk" IsSelected="True"/>
                            <ComboBoxItem Content="DiÄŸer MirasÃ§Ä±lar" Tag="diger"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumInheritanceAmount"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="10000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Miras TutarÄ± (TL)"
                                          Margin="0,0,0,15"/>

                        <TextBlock FontSize="11" 
                                  Foreground="{DynamicResource MahApps.Brushes.Gray2}"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,15">
                            <Run Text="ðŸ’¡ 2025 Ä°stisna TutarlarÄ±:"/>
                            <LineBreak/>
                            <Run Text="EÅŸ ve Ã‡ocuklar: 440.000 TL"/>
                            <LineBreak/>
                            <Run Text="DiÄŸer MirasÃ§Ä±lar: 110.000 TL"/>
                        </TextBlock>

                        <Button Content="ðŸŽ Hesapla" 
                               Click="BtnCalculateInheritance_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="InheritanceResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <StackPanel>
                                <TextBlock Text="Hesaplama Sonucu" 
                                          FontSize="18" 
                                          FontWeight="Bold"
                                          Margin="0,0,0,15"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="Miras TutarÄ±:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtInheritanceAmount" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="Vergi TutarÄ±:" FontSize="14" Margin="0,5"/>
                                    <TextBlock x:Name="TxtInheritanceTax" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="Net Miras:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                    <TextBlock x:Name="TxtInheritanceNet" Grid.Row="2" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#28A745" Margin="0,10,0,5"/>
                                </Grid>

                                <ItemsControl x:Name="InheritanceBrackets" Margin="0,15,0,0">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{DynamicResource MahApps.Brushes.Gray10}" 
                                                   Padding="10" 
                                                   Margin="0,5" 
                                                   CornerRadius="5">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Text="{Binding Aciklama}" FontSize="12"/>
                                                    <TextBlock Grid.Column="1" FontSize="12" FontWeight="Bold">
                                                        <Run Text="{Binding VergiTutari, StringFormat='{}{0:N2} TL'}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Vergi Gecikme Faizi -->
            <TabItem Header="â±ï¸ Gecikme Faizi">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="20">
                        <ComboBox x:Name="CmbDelayYear" 
                                 mah:TextBoxHelper.Watermark="YÄ±l"
                                 Margin="0,0,0,15">
                            <ComboBoxItem Content="2025" Tag="2025" IsSelected="True"/>
                            <ComboBoxItem Content="2024" Tag="2024"/>
                        </ComboBox>

                        <mah:NumericUpDown x:Name="NumTaxDebt"
                                          Minimum="0"
                                          Maximum="999999999"
                                          Interval="1000"
                                          StringFormat="N2"
                                          mah:TextBoxHelper.Watermark="Vergi Borcu (TL)"
                                          Margin="0,0,0,15"/>

                        <mah:NumericUpDown x:Name="NumDelayDays"
                                          Minimum="1"
                                          Maximum="3650"
                                          Interval="1"
                                          mah:TextBoxHelper.Watermark="Gecikme GÃ¼n SayÄ±sÄ±"
                                          Margin="0,0,0,15"/>

                        <Button Content="â±ï¸ Hesapla" 
                               Click="BtnCalculateDelay_Click"
                               Style="{StaticResource MahApps.Styles.Button.Square.Accent}"
                               Height="40"
                               Margin="0,0,0,20"/>

                        <Border x:Name="DelayResult" 
                               Visibility="Collapsed"
                               Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
                               BorderBrush="{DynamicResource MahApps.Brushes.Accent}"
                               BorderThickness="2"
                               CornerRadius="8"
                               Padding="20">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Vergi Borcu:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtDelayDebt" Grid.Row="0" Grid.Column="1" FontSize="14" FontWeight="Bold" Margin="0,5"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Gecikme Faizi:" FontSize="14" Margin="0,5"/>
                                <TextBlock x:Name="TxtDelayInterest" Grid.Row="1" Grid.Column="1" FontSize="14" FontWeight="Bold" Foreground="#DC3545" Margin="0,5"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Toplam BorÃ§:" FontSize="16" FontWeight="Bold" Margin="0,10,0,5"/>
                                <TextBlock x:Name="TxtDelayTotal" Grid.Row="2" Grid.Column="1" FontSize="16" FontWeight="Bold" Foreground="#DC3545" Margin="0,10,0,5"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Loading Overlay -->
        <Grid x:Name="LoadingOverlay" 
             Grid.RowSpan="3" 
             Background="#80000000" 
             Visibility="Collapsed">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <mah:ProgressRing IsActive="True" Foreground="White" Width="60" Height="60"/>
                <TextBlock Text="Vergi oranlarÄ± gÃ¼ncelleniyor..." 
                          Foreground="White" 
                          FontSize="16" 
                          Margin="0,20,0,0"
                          HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</Page>
